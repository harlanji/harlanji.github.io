---
layout: post
title: Hacking on the Facebook Platform
date: 2007-06-02
comments: false
---

<h1>{{ page.title }}</h1>
<div class='post'>
I've been toying with the Facebook Platform the the past few days and am impressed by it thus far, minus the lack of documentation and usage examples. I created a base class to extend applications from in order to get a feel for how application are structured. It is based after the only coherent piece of documentation I have been able to find, <a href="http://tperry256.dreamhost.com/f8/tutorial/">here.</a> I will publish my code soon; in the mean time, here is an example:<br /><pre><br />class FacebookApplication {<br />...<br />     function get_friends_with_app_installed() {<br />             $fql = "SELECT uid from user where uid in (SELECT uid2 FROM friend WHERE uid1=".$this->get_client_id().") and is_app_user=1;";<br />             return $this->get_client()->api_client->fql_query( $fql );<br />     }<br />}<br /><br />class LookMiiUpFacebookApp extends FacebookApplication {<br />...<br />   function splash() {<br />           echo "lookmiiup splash";<br />           print_r( $this->get_friends_with_app_installed() );<br />   }<br /><br />   function set_info() {<br />           $wii = strip_tags($_REQUEST["wii"]);<br /><br />           $facebook = $this->get_client();<br />           $user = $this->get_client_id();<br /><br />           $facebook->api_client->profile_setFBML("Wii Number: $wii", $user);<br />           $facebook->api_client->feed_publishActionOfUser( "got a new Wii number", "$wi<br />i" );<br /><br />           echo "wii: $wii";<br />   }<br /><br />   function handle_request() {<br />           static $allowed_methods = array(<br />                   "set_info"<br />           );<br /><br />           if( in_array( $method, $allowed_methods ) ) {<br />                   $params = array();<br />                   call_user_func_array( array( $this, $method ), $params );<br />           } else {<br />                   parent::handle_request();<br />           }<br />   }<br /><br />}<br /><br />$fbapp = new LookMiiUpFacebookApp( $appapikey, $appsecret, $appcallbackurl );<br /><br />$fbapp->require_login();<br />$fbapp->require_installation();<br /><br />$fbapp->handle_request();<br /></pre><br /><br />The added value is the ability to more intuitively (in my opinion, anyway) create an application that requires login/installation and setup the handler methods. I plan to use it, with Smarty for FBML generation, to integrate LookMiiUp into Facebook.</div>
