---
layout: post
title: Working With Money Using Floating Point Numbers
date: 2007-06-12
comments: false
---

<h1>{{ page.title }}</h1>
<div class='post'>
While it seems like a n00bish lack of knowledge on my part, today I was told by a colleague that working with money using floating point numbers is Bad, mmm-kay. Curious and skeptical, I did a quick Google search and <a href="http://www.javaranch.com/newsletter/July2003/MoneyInJava.html">learned why this is true</a>. It turns out that the <a href="http://en.wikipedia.org/wiki/IEEE_754">IEEE 754</a> specification for floating point numbers makes them a poor option. Don't get me wrong, this is not a flaw or oversight on their part--floating point operations are designed for use with large number where magnitude and speed are more important than precision. One can think of them as "<a href="http://en.wikipedia.org/wiki/Floating_point">a computer realization of scientific notation</a>." I can blame only myself :)<br /><br />I thought this would be common knowledge among CS graduates, but was surprised to learn that many I know had no idea. Perhaps people have just not made the connection between what they learned in school (anything?) and the application of money. Even at my job, the commercial framework we use has a Money implementation that uses double (64-bit floating point) values internally. This is being addressed by a colleague :)<br /><br />As far as other languages such as PHP and Ruby are concerned, I was not able to reproduce the results given in the Java article with a 1:1 port; they do, however, use floats internally for decimal calculation. I have experienced similar issues in the past with PHP, and the PHP manual does <a href="http://us2.php.net/float">warn against using floating point numbers</a> where any sort of precision is required (which I had never read before).<br /><br />As an alternative to floating point values for working with decimals, <a href="http://www.ibm.com/developerworks/java/library/j-jtp0114/">Java</a>  (and <a href="http://epramono.blogspot.com/2005/01/double-vs-bigdecimal.html">here</a>) and <a href="http://www.ruby-forum.com/topic/48754">Ruby</a> offer BigDecimal implemenations, and PHP offers <a href="http://us.php.net/manual/en/ref.bc.php">BCMath</a>.</div>
