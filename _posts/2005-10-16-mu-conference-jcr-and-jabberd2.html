---
layout: post
title: mu-conference, jcr and jabberd2
date: 2005-10-16
comments: false
---

<h1>{{ page.title }}</h1>
<div class='post'>
<strong>Objective:</strong><br />To get mu-conference running with jabberd2.<br /><br /><strong>Projects Utilized:</strong><br />JabberD 2.0.3<br />JCR (Jabber Component Runtime) 0.2.4<br /><br /><strong>Outcome:</strong><br />Success. I could have done a couple things: 1) run a jabberd 1.4 server with a service entry, 2) use JCR to compile mu-conference as a stand-alone daemon that uplinks to the router. I opted for plan 2 because it seemed like a cleaner option, however I may still revert to plan 1, depending how JCR with aim-transport turns out.<br /><br /><br /><strong>Steps:</strong><br />(I typed this once and lost it, and I don't feel like typing a lot again)<br /><br />Follow the steps <a href="http://mu-conference.jabberstudio.org/docs/jabberd2.php">here</a> to get JCR set up, mu-conference binary and the base muc-jcr.xml config file in place.<br /><br />After copying muc-jcr.xml to my etc directory, I made these changes:<br /><pre><br />&lt;jcr&gt;<br />...<br />&lt;!-- the name of the entry in your router.xml --&gt;<br />&lt;name&gt;muclinker&lt;/name&gt;<br />&lt;!-- the password required by your router.xml --&gt;<br />&lt;secret&gt;secret&lt;/secret&gt;<br />&lt;!-- the hostname that you'll be using for conference --&gt;<br />&lt;host&gt;c.im.nullirc.net&lt;/host&gt;<br />&lt;!-- the IP of your router (usually the same as your main jabber server) --&gt;<br />&lt;ip&gt;127.0.0.1&lt;/ip&gt;<br />&lt;!-- the port of that server --&gt;<br />&lt;port&gt;5347&lt;/port&gt;<br /><br />&lt;!-- can these be relative? I'm not sure, I haven't tried --&gt;<br />&lt;!-- ps. don't forget to change permissions! --&gt;<br />&lt;spool&gt;/var/spool/jabber/c.im.nullirc.net&lt;/spool&gt;<br />&lt;logdir&gt;/var/log/mu-conference&lt;/logdir&gt;<br />&lt;pidfile&gt;/var/jabberd/pid/mu-conference.pid&lt;/pidfile&gt;<br />...<br />&lt;/jcr&gt;<br /></pre><br /><br />And changes to router.xml:<br /><pre><br />&lt;alias name='c.im.nullirc.net' target='muclinker'/&gt;<br /></pre><br />Finally I wanted my muc to run with the jabberd wrapper, so I went ahead and figured out how to add a job... right before I found <a href="http://mu-conference.jabberstudio.org/docs/jabber-solaris.php">this</a> article telling me how to do it (under Jabber and MUC Startup); good thing it's self documented code or I'd have spent all night before I found the new article.<br /><br />The main lesson of the night is CHECK PERMISSIONS IF YOU'VE BEEN SYSADMINING FOR AN EXTENDED PERIOD OF TIME.<span class="short_entry_meta"><br /></span></div>
